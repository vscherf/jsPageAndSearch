"use strict";function fnPageTable(n,t){var i=$(t).closest("table").children("tbody"),r=$(i).data("page"),s=$(i).data("rows"),l=$(i).data("tblRows"),f=$(i).data("pages"),h=$(t).closest("td").children("input:text"),e=fnGetProp(prop,"effect"),c,u,o;if(isNaN(n))switch(n){case"first":r=0;break;case"last":r=f-1;break;case"prev":r>0&&(r+=-1);break;case"next":r<f-1&&r++}else r=n;h.length>0?h.val(parseInt(r+1)):(c=$(t).closest("td").children("div").next("label"),$(c).html("Seite "+parseInt(r+1)+" von "+f));$(i).data("page",r);u=r*s;o=u+s;e!==null?($(i).hide(e),$(i).promise().done(function(){$(i).children("tr").hide();$(i).children("tr").slice(u,o).show();$(i).show(e)})):($(i).children("tr").hide(),$(i).children("tr").slice(u,o).show())}function fnSearchTable(n,t){var b=fnGetProp(prop,"tableName"),l=fnGetProp(prop,"searchInCols"),h=fnGetProp(prop,"matchClass"),a=$(n).val().toUpperCase(),i=$(b).children("tbody").children("tr"),v=0,u="",c=!1,r,f,y,e,p,o,s,w;for(parseInt(l)!==-1&&(u=l.split(",")),r=0;r<i.length;r++){if(f=[],u.length===0)f=$(i[r]).children("td"),y=$(i[0]).children("td").length;else{for(e=0;e<u.length;e++)p=$(i[r]).children("td:nth-child("+u[e]+")"),f.push(p);y=u.length}for(o=0;o<f.length;o++)s=$(f[o]),w=$(s).html().toUpperCase(),w.indexOf(a)>-1?(c=!0,$(s).addClass(h),v++):$(s).removeClass(h);t&&$(t).html("Treffer: "+v);i[r].style.display=c?"":"none";a-length==0&&($(i).children("td").removeClass(h),$(t).empty());c=!1}}function fnGetProp(n,t){for(var r,i=0;i<n.length;i++)if(r=Object.keys(n[i])[0],r===t)return n[i][t]}var table,DEFAULTS=[{tableName:""},{tableStyle:!0},{withBootstrap:!1},{showPager:!0},{showSearcher:!0},{showInFooter:!1},{outputRows:10},{showNavButtons:!0},{buttonSize:null},{startWithPage:1},{effect:null},{showPageInput:!0},{pageInputClass:null},{searchOuput:!0},{searchInCols:-1},{searcherClass:"tblPageAndSearch-searchfield"},{matchClass:"tblPageAndSearch-match"},{searchPlaceholder:"type text to search in table"}],prop=[],bs=!1,fnPageAndSearch=function(n){var c,et,d,b,i,k,h,it,o,v,y,p,rt;for(typeof n!="undefined"&&(prop=n),c=0;c<DEFAULTS.length;c++){for(et=Object.keys(DEFAULTS[c])[0],d=!1,b=0;b<prop.length;b++)if(prop[b].hasOwnProperty(et)){d=!0;break}d||prop.push(DEFAULTS[c])}if(bs=fnGetProp(prop,"withBootstrap"),table=$(fnGetProp(prop,"tableName")),!table.length>0)return!1;var l=$(table).children("tbody"),t,u=new $("<tr>"),s=new $("<td>"),g=$(table).children("tbody").children("tr:nth-child(1)").children("td").length;if(fnGetProp(prop,"tableStyle")&&(bs?table.addClass("table table-bordered table-condensed table-striped table-hover"):(table.addClass("tblPageAndSearch-table"),$(table).children("tbody").children("tr").mousedown(function(n){n.ctrlKey?$(this).toggleClass("tblPageAndSearch-tr-select"):$(this).toggleClass("tblPageAndSearch-tr-select").siblings().removeClass("tblPageAndSearch-tr-select")}))),fnGetProp(prop,"showPager")){var f=new $("<div>"),ot=new $("<label>"),nt=$(l).children("tr").length,tt=fnGetProp(prop,"outputRows"),e=Math.ceil(nt/tt),a="",r=fnGetProp(prop,"startWithPage");if(r==="last"?r=parseInt(e-1):r==="middle"?r=parseInt(e/2):isNaN(r)&&(r=1),r=parseInt(r-1),r<1&&(r=0),r>parseInt(e-1)&&(r=parseInt(e-1)),nt>tt){switch(fnGetProp(prop,"buttonSize")){case"xs":a="btn-xs";break;case"sm":a="btn-sm";break;case"lg":a="btn-lg"}if(fnGetProp(prop,"showInFooter")?(t=$(table).children("tfoot"),t.length===0?(t=$("<tfoot>"),t.appendTo(table),u.appendTo(t)):$(t).children("tr").after(u),t=$(table).children("tfoot")):(t=$(table).children("thead"),t.length===0?(t=$("<thead>"),t.appendTo(table),u.appendTo(t)):$(t).children("tr:first-child").before(u),t=$(table).children("thead")),bs?($(f).addClass("btn-group"),$(f).addClass("tblPageAndSearch-pagediv-bs")):$(f).addClass("tblPageAndSearch-pagediv"),u.addClass("tblPageAndSearch-tr"),s.attr("colspan",g),s.appendTo(u),f.appendTo(s),$(l).data("pages",e),$(l).data("tblRows",nt),$(l).data("rows",tt),$(l).children("tr").hide(),$(f).after(ot),fnGetProp(prop,"showNavButtons")){for(k=1;k<=4;k++){i=new $("<button>");h="";bs&&(y="btn btn-default "+a);$(i).addClass(y);switch(k){case 1:$(i).html("&laquo;");$(i).data("position","first");h="erste Seite";break;case 2:$(i).html("&lsaquo;");$(i).data("position","prev");h="eine Seite zur√ºck";break;case 3:$(i).html("&rsaquo;");$(i).data("position","next");h="eine Seite vor";break;case 4:$(i).html("&raquo;");$(i).data("position","last");h="letzte Seite"}$(i).attr("title",h);$(i).mousedown(function(n){if(n.ctrlKey)$(this).closest("table").children("tbody").children("tr").show();else{var t=$(this).data("position");fnPageTable(t,this)}});i.appendTo(f)}fnGetProp(prop,"showPageInput")&&(it=new $("<label>"),it.html("Seite"),o=$("<input>"),o.prop("min",1),o.prop("max",e),o.prop("title","Seitenzahl"),o.addClass("tblPageAndSearch-pageinput"),bs?o.addClass("form-control"):o.addClass(fnGetProp(prop,"pageInputClass")),$(f).after(o),$(f).after(it),$(o).change(function(){var n=$(this).val();console.log(n);$.isNumeric(n)||(n=1);n=parseInt(n);n<1&&(n=1,$(this).val(n));parseInt(n+1)>e&&($(this).val(n),n=parseInt(e));fnPageTable(n-1,this)}),$(ot).html("von "+e))}else for(v=0;v<e;v++)i=new $("<button>"),i.html(parseInt(v)+1),y="",fnGetProp(prop,"withBootstrap")&&(y="btn btn-default "+a),$(i).data("position",v),$(i).mousedown(function(n){if(n.ctrlKey)$(this).closest("table").children("tbody").children("tr").show();else{var t=$(this).data("position");fnPageTable(t,this)}}),$(i).addClass(y),i.appendTo(f);i=$(f).children("button:first-child");fnPageTable(r,i)}}if(fnGetProp(prop,"showSearcher")){if(p=new $("<input>"),u=new $("<tr>"),s=new $("<td>"),t=$(table).children("thead"),t.length===0?(t=$("<thead>"),t.appendTo(table),u.appendTo(t)):$(t).children("tr:first-child").before(u),t=$(table).children("thead"),s.attr("colspan",g),u.addClass("tblPageAndSearch-tr"),s.appendTo(u),$(p).addClass(fnGetProp(prop,"searcherClass")),p.prop("placeholder",fnGetProp(prop,"searchPlaceholder")),fnGetProp(prop,"searchOuput")){var w=$(table).children("tfoot"),ut=new $("<tr>"),ft=new $("<td>");w.length===0?(w=$("<tfoot>"),w.appendTo(table)):$(w).children("tr").after(ut);ut.appendTo(w);ft.attr("colspan",g);u.addClass("tblPageAndSearch-tr");ft.appendTo(ut);rt=$("<span>");rt.appendTo(ft)}p.keyup(function(){fnSearchTable(this,rt)});p.appendTo(s)}};